<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>上传活动和图片</title>
</head>
<body>
<h1>上传活动和图片</h1>

<form id="activityForm" enctype="multipart/form-data">
  <label for="activityName">活动名称：</label>
  <input type="text" id="activityName" name="activityName" required><br><br>

  <label for="teaId">老师编号：</label>
  <input type="number" id="teaId" name="teaId" required><br><br>

  <label for="activityType">活动类别：</label>
  <input type="text" id="activityType" name="activityType" required><br><br>

  <label for="currentNumber">目前人数：</label>
  <input type="number" id="currentNumber" name="currentNumber" required><br><br>

  <label for="maxNumber">上限人数：</label>
  <input type="text" id="maxNumber" name="maxNumber" required><br><br>

  <label for="activityDetail">活动介绍：</label>
  <textarea id="activityDetail" name="activityDetail" required></textarea><br><br>

  <label for="activityPrice">活动价格：</label>
  <input type="number" id="activityPrice" name="activityPrice" required><br><br>

  <label for="activityLocation">活动地点：</label>
  <input type="text" id="activityLocation" name="activityLocation" required><br><br>

  <label for="activityStartTime">活动开始时间：</label>
  <input type="datetime-local" id="activityStartTime" name="activityStartTime" required><br><br>

  <label for="activityEndTime">活动结束时间：</label>
  <input type="datetime-local" id="activityEndTime" name="activityEndTime" required><br><br>

  <label for="activityDueTime">活动报名截止时间：</label>
  <input type="datetime-local" id="activityDueTime" name="activityDueTime" required><br><br>



  <label for="file">选择图片：</label>
  <input type="file" id="file" name="file" required><br><br>

  <!-- 其他属性字段... -->

  <input type="submit" value="提交">
</form>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $('#activityForm').submit(function(event) {
      event.preventDefault();

      var formData = new FormData(this);

      // 轉換活動開始時間
      var startTime = new Date($('#activityStartTime').val());
      var startTimeFormatted = formatDate(startTime);
      formData.set('activityStartTime', startTimeFormatted);

      // 轉換活動結束時間
      var endTime = new Date($('#activityEndTime').val());
      var endTimeFormatted = formatDate(endTime);
      formData.set('activityEndTime', endTimeFormatted);

      // 轉換活動報名截止時間
      var dueTime = new Date($('#activityDueTime').val());
      var dueTimeFormatted = formatDate(dueTime);
      formData.set('activityDueTime', dueTimeFormatted);

      // 其他欄位的處理...

      $.ajax({
        url: "/your-endpoint-url", // 請替換為您的後端端點URL
        type: "POST",
        data: formData,
        contentType: false,
        processData: false,
        success: function(response) {
          console.log(response);
          // 處理成功響應
        },
        error: function(xhr, status, error) {
          console.error(error);
          // 處理錯誤響應
        }
      });
    });
  });

  function formatDate(date) {
    var year = date.getFullYear();
    var month = padZero(date.getMonth() + 1);
    var day = padZero(date.getDate());
    var hours = padZero(date.getHours());
    var minutes = padZero(date.getMinutes());
    var seconds = padZero(date.getSeconds());

    return year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds;
  }

  function padZero(value) {
    return value < 10 ? '0' + value : value;
  }

</script>
</body>
</html>
